# 软件测试

## 1. 判断三角形类型

### 问题描述

- 输⼊三个整数a,b,c,作为三角形三条边，通过程序判断三条边构成的三角形类型：
  - ⼀般三角形
  - 等边三角形
  - 等腰三角形
  - 不构成三角形
- a<b+c; b<a+c; c<a+b;
- 1<=a<=256;1<=b<=256;1<=c<=256

### 采用边界值法：

1. 规定各边取值范围为[1,256]，各边正常值为 128
2. 假定固定住 a，b 的值
3. 得出对于c的限制条件，|a - b|< c < a + b
4. 进一步得出，max( 0, |a - b| ) < c < min( 257, a + b )
5. 采用健壮边界值：
   1. a，b，c 的取值依赖于其他两项的取值，因此采用健壮性边界值
   2. 除了取最小值、比最小值大的值、正常值、比最大值小的值、最大值外，再取⼀个略高于最大值的值和略小于最小值的值

| a    | b    | c    | 预期结果     |
| ---- | ---- | ---- | ------------ |
| 0    | 128  | 128  | 输入越界     |
| 1    | 128  | 128  | 等腰三角形   |
| 3    | 128  | 128  | 等腰三角形   |
| 254  | 128  | 128  | 等腰三角形   |
| 256  | 128  | 128  | 不构成三角形 |
| 258  | 128  | 128  | 输入越界     |
| 128  | 0    | 128  | 输入越界     |
| 128  | 1    | 128  | 等腰三角形   |
| 128  | 3    | 128  | 等腰三角形   |
| 128  | 254  | 128  | 等腰三角形   |
| 128  | 128  | 128  | 等边三角形   |

## 3. 年终考评模块边界值分析与测试

### 问题描述

在一销售管理系统中，其中的一个模块负责对公司员工进行年终考评，考评综合考虑职工在公司工作时间长短（计年）、每年请假的次数（不能超过20天，20天以上，包括20天，则免于年终考评）、员工在公司的级别（分1，2，3，4，5个级别）及本年度的销售总额，考评的结果最高以5分计，公司成立于2000年初，该软件的设计使用周期到2035年底。

#### 输入变量：
- 工作时间长短（年）：2000~2035年，实际取值范围为[0, 35]（假设2000年入职，2035年为最大）
- 每年请假天数：[0, 19]，20天及以上免于考评
- 员工级别：[1, 5]
- 本年度销售总额：[0, +∞)

### (1) 基本边界值和最坏情况边界值测试用例数量

- 工作时间长短（年）：最小值0，最小值+1=1，正常值=中间值=17，最大值=35，最大值-1=34
- 请假天数：最小值0，最小值+1=1，正常值=10，最大值=19，最大值-1=18
- 员工级别：最小值1，最小值+1=2，正常值=3，最大值=5，最大值-1=4
- 销售总额：最小值0，最小值+1=1，正常值=10000，最大值=假设1000000，最大值-1=999999

#### 基本边界值法
- 每个变量取最小值、最大值、正常值，共3个值
- 变量数n=4
- 测试用例数= n*2+1 = 4*2+1 = 9

#### 最坏情况边界值法
- 每个变量取最小值、最小值+1、正常值、最大值-1、最大值，共5个值
- 变量数n=4
- 测试用例数= 5^4 = 625

### (2) 健壮边界值法下"工作时间长短"为非正常值的测试用例

- 健壮边界值法：在基本边界值基础上，增加略小于最小值和略大于最大值的情况
- 工作时间长短正常范围[0,35]，非正常值为-1和36

| 用例编号 | 工作时间长短（年） | 请假天数 | 员工级别 | 销售总额 | 预期结果         |
|----------|-------------------|----------|----------|----------|------------------|
| 1        | -1                | 10       | 3        | 10000    | 非法输入/报错    |
| 2        | 36                | 10       | 3        | 10000    | 非法输入/报错    |

## 5. 边界值测试可以适用于function(method) level，class level,，system level，分析电商平台系统测试时考虑的边界值情况。

## 边界值测试在不同级别的应用

### 1. 方法级(Function/Method Level)边界值测试

在方法级别，边界值测试主要关注单个函数或方法的输入参数边界：
- 数值型参数的上下限
- 字符串长度的最小最大值
- 集合/数组的边界大小
- 布尔值的边界情况

### 2. 类级(Class Level)边界值测试
在类级别，边界值测试关注类与类之间交互时的边界条件：
- 类属性的有效范围
- 类方法组合调用时的边界情况
- 类状态转换的边界条件

**示例**：电商平台的购物车类
- 购物车商品数量上限(如100件)
- 购物车总金额上限(如100万元)
- 特殊商品(如限购商品)的边界

### 3. 系统级(System Level)边界值测试
在系统级别，边界值测试关注整个系统的边界行为：
- 系统性能边界(最大并发用户数)
- 数据存储容量边界
- 网络带宽边界
- 第三方接口调用限制

## 电商平台系统测试中的边界值情况

### 1. 用户账户相关边界
- 用户名/密码长度边界(如4-20字符)
- 用户年龄边界(如13岁以上才能注册)
- 用户积分上限/下限
- 用户登录失败尝试次数上限(如5次锁定)

### 2. 商品管理相关边界
- 商品价格边界(如0.01元-999999元)
- 商品库存边界(0表示缺货，最大库存限制)
- 商品名称/描述长度限制
- 商品评价分数边界(如1-5星)

### 3. 订单处理相关边界

- 订单金额边界(如最低10元起订)
- 订单商品数量边界(如单笔订单最多50件)
- 订单取消时间边界(如付款后30分钟内可取消)
- 运费计算边界(如满99元包邮)

### 4. 支付相关边界
- 支付金额边界(如单笔支付1元-50000元)
- 支付时间边界(如30分钟内完成支付)
- 退款金额边界(如原路退款金额限制)
- 优惠券使用边界(如满100减20)

### 5. 系统性能相关边界
- 最大并发用户数(如10000并发)
- 数据库响应时间边界(如查询不超过2秒)
- 页面加载时间边界(如首屏不超过3秒)
- API调用频率限制(如每秒100次)


## 8. 实时C/S系统

### 问题描述

某实时的C/S系统，服务器端应用程序需要接受客户端发送的不同类型的数据包，为了使系统设计达到最优，使用统⼀接口

包中各段的解释如下:

- A：确定不同的包类型共有4个bit位，该系统有10种包类型，分别用0000、0001、0010、0011、0100、0101、0110、0111、1000、1001来表示；
- B：表示本发送包的内容字节数，共64个bit位；
- C：表示业务种类，表示“现金查询”，“支票查询”，“存款”，“取款”；
- D：是在100到999之间的数值；
- E：是在200和500之间或在600到900之间的数值；
- F：输⼊条件是六位字符串；
- G：为保留的256个bits。

用等价类测试的思想，如何划分等价类？并指出强⼀般等价类用例的个数

### 采用等价类方法

- 对于变量 A，划分出的等价类为

  - A1 = { 0000 }
  - A2 = { 0001 }
  - A3 = { 0010 }
  - A4 = { 0011 }
  - A5 = { 0100 }
  - A6 = { 0101 }
  - A7 = { 0110 }
  - A8 = { 0111 }
  - A9 = { 1000 }
  - A10 = { 1001 }

  无效等价类为

  - A11 = { 1010,1011,1100,1101,1110,1010,1111 }

- 针对变量 B，划分出的等价类为

  - B1 = { B | 0<=B<2^64,B∈Z }

  无效等价类为

  - B2 = { B | B>=2^64,B∈Z }

- 针对变量 C，划分出的等价类为

  - C1 = { "现金查询" }

  - C2 = { "支票查询" }

  - C3 = { "存款" }

  - C4 = { "取款" }

  无效等价类为

  - C5 = { C | C ∉ { "现金查询","支票查询","存款","取款" } }

- 针对变量 D，划分出的等价类为

  - D1 = { D | 100<=D<=999,D∈Z }

  无效等价类为

  - D2 = { D | 0<=D<100,D∈Z }

  - D3 = { D | D>999,D∈Z }

- 针对变量 E，划分出的等价类为

  - E1 = { E | 200<=E<=500,E∈Z }

  - E2 = { E | 600<=E<=900,E∈Z }

  无效等价类为

  - E3 = { E | 0<=E<200,,E∈Z }

  - E4 = { E | 500<E<900,E∈Z }

- 针对变量 F，划分出的等价类为

  - F1 = { F | F 为六位字符串 }

  无效等价类为

  - F2 = { F | F 字符串长度小于六或大于六 }

- 从不同的输⼊或输出变量划分的有效等价类中或区间中取⼀个值分别构成集合，这些不同变量取值构成的集合的笛卡尔积中的每个元素就对应⼀个强⼀般等价类的测试用例的输入

- 强⼀般等价类的个数为10 * 1 * 4 * 1 * 2 * 1=80 个

## 9. 判断三角形类型

### 问题描述

- 输⼊三个整数a,b,c,作为三角形三条边，通过程序判断三条边构成的三角形类型：
  - ⼀般三角形
  - 等边三角形
  - 等腰三角形
  - 不构成三角形
- a<b+c; b<a+c; c<a+b;

### 采用弱一般等价类：

D1={{a,b,c}|三条边 a,b,c 构成的等边三⻆形} 

D2={{a,b,c}|三条边 a,b,c 构成的⾮等边等腰三⻆形} 

D3={{a,b,c}|三条边 a,b,c 构成的⾮等边⾮等腰的⼀般三⻆形} 

D4={{a,b,c}|三条边 a,b,c 不构成三⻆形}

| a    | b    | c    | 预期结果     |
| ---- | ---- | ---- | ------------ |
| 128  | 128  | 128  | 等边三角形   |
| 128  | 150  | 150  | 等腰三角形   |
| 127  | 128  | 129  | 普通三角形   |
| 128  | 128  | 256  | 不构成三角形 |

### 采用弱健壮等价类：

| a    | b    | c    | 预期结果     |
| ---- | ---- | ---- | ------------ |
| 128  | 128  | 128  | 等边三角形   |
| 128  | 150  | 150  | 等腰三角形   |
| 127  | 128  | 129  | 普通三角形   |
| 128  | 128  | 256  | 不构成三角形 |
| 257  | 128  | 128  | 输入越界     |
| 128  | 257  | 128  | 输入越界     |
| 128  | 128  | 257  | 输入越界     |
| 0    | 128  | 128  | 输入越界     |
| 128  | 0    | 128  | 输入越界     |
| 128  | 128  | 0    | 输入越界     |

## 12. ATM机系统

### 问题描述

- 构建ATM的state transition diagram，再基于state transition testing分析出transition tree,基于transition tree 的路径设计测试用例，考虑robustness。

### 状态图



### 构建transition tree



### 设计测试用例

| 路径                                                         |
| ------------------------------------------------------------ |
| 空闲->检查卡->退卡->空闲                                     |
| 空闲->检查卡->第一次输入密码->选择交易->查询交易->退卡       |
| 空闲->检查卡->第一次输入密码->选择交易->查询交易->选择交易   |
| 空闲->检查卡->第一次输入密码->选择交易->取款交易->退卡       |
| 空闲->检查卡->第一次输入密码->选择交易->取款交易->选择交易   |
| 空闲->检查卡->第一次输入密码->选择交易->存款交易->退卡       |
| 空闲->检查卡->第一次输入密码->选择交易->存款交易->选择交易   |
| 空闲->检查卡->第一次输入密码->第二次输入密码->选择交易       |
| 空闲->检查卡->第一次输入密码->第二次输入密码->第三次输入密码->选择交易 |
| 空闲->检查卡->第一次输入密码->第二次输入密码->第三次输入密码->吞卡->空闲 |



## 13. ERP系统

### 问题描述

根据系统需求和流程图，归纳出出较清晰的主、备选流关系图，并基于主、备选流设计场景和相应的测试⽤例。MPS（ Master Production Schedule），MRP(ManufacturingResource Planning)

### 分析

程序基本流：

1. 根据销售合同制订计划需求，计算MPS，可⽤库存满足销售需求，销售发货管理，货确认发完，合同结束。

备选流：

1. 可用库存不满足需求
2. 没有可用库存
3. 可用库存满足生产需求
4. 可用库存满足生产需求
5. 采购质检合格
6. 采购质检不合格
7. 生产质检合格
8. 生产质检不合格
9. 货没有发完

### 关系图：



| 分类                                                         | 说明                                 |
| ------------------------------------------------------------ | ------------------------------------ |
| 场景 1——正常销售并结案                                       | 基本流                               |
| 场景 2——可用库存不满足销售需求且有可用库存                   | 基本流、备选流 1                     |
| 场景 3——可用库存不满足销售需求且没有可用库存，可用库存不满足生产需求且生产质检不合格 | 基本流、备选流 2、备选流 3、备选流 8 |
| 场景 4——可用库存不满足销售需求且没有可用库存，可用库存不满足生产需求且生产质检合格 | 基本流、备选流 2、备选流 3、备选流 7 |
| 场景 5——可用库存不满足销售需求且没有可用库存，可用库存满足生产需求且采购质检不合格 | 基本流、备选流 2、备选流 4、备选流 6 |
| 场景 6——可用库存不满足销售需求且没有可用库存，可用库存满足生产需求且采购质检合格 | 基本流、备选流 2、备选流 4、备选流 5 |
| 场景 7——货没有发完                                           | 基本流、备选流 9                     |


## 16. 销售系统佣金计算

### 问题描述

如果销售员的年销售额大于200万RMB且请假天数不超过10天的情况下，现金到帐大于等于60%，则佣金（提成）系数为7，即佣金值为销售额除以佣金系数；现金到帐小于60%，佣金不予计算。所有其他情况且现金到帐小于等于85%，则按佣金系数均为6计算佣金，现金到账大于85%，佣金系数按5处理。

### 流程图

```mermaid
graph TD
    A[开始] --> B{年销售额>200万?}
    B -- 是 --> C{请假天数≤10?}
    C -- 是 --> D{到账率≥60%?}
    D -- 是 --> E[佣金=销售额/7]
    D -- 否 --> F[佣金=0]
    C -- 否 --> G{到账率>85%?}
    G -- 是 --> H[佣金=销售额/5]
    G -- 否 --> I[佣金=销售额/6]
    B -- 否 --> J{到账率>85%?}
    J -- 是 --> K[佣金=销售额/5]
    J -- 否 --> L[佣金=销售额/6]
    E --> M[结束]
    F --> M
    H --> M
    I --> M
    K --> M
    L --> M
```

### 覆盖表

#### 语句覆盖
| 用例编号 | 年销售额 | 请假天数 | 到账率 | 预期佣金 | 覆盖语句 |
|----------|----------|----------|--------|----------|----------|
| 1        | 2100000  | 5        | 70     | 2100000/7| 主路径   |
| 2        | 2100000  | 5        | 50     | 0        | 佣金为0  |
| 3        | 1000000  | 20       | 80     | 1000000/6| 其他情况 |
| 4        | 1000000  | 20       | 90     | 1000000/5| 其他情况 |

#### 判断覆盖
| 用例编号 | 年销售额 | 请假天数 | 到账率 | 预期佣金 | 覆盖判断 |
|----------|----------|----------|--------|----------|----------|
| 1        | 2100000  | 5        | 70     | 2100000/7| if1 true, if2 false |
| 2        | 2100000  | 5        | 50     | 0        | if1 true, if2 true  |
| 3        | 1000000  | 20       | 80     | 1000000/6| if1 false, if3 true |
| 4        | 1000000  | 20       | 90     | 1000000/5| if1 false, if3 false|

#### 条件覆盖
| 用例编号 | 年销售额 | 请假天数 | 到账率 | 预期佣金 | 覆盖条件 |
|----------|----------|----------|--------|----------|----------|
| 1        | 2100000  | 5        | 70     | 2100000/7| sale>2e6 true |
| 2        | 1900000  | 5        | 70     | 1900000/6| sale>2e6 false|
| 3        | 2100000  | 15       | 70     | 2100000/6| day<=10 false|
| 4        | 2100000  | 5        | 50     | 0        | rate<60 true |
| 5        | 2100000  | 5        | 70     | 2100000/7| rate<60 false|
| 6        | 1000000  | 20       | 80     | 1000000/6| rate<=85 true|
| 7        | 1000000  | 20       | 90     | 1000000/5| rate<=85 false|

#### 判断-条件覆盖
| 用例编号 | 年销售额 | 请假天数 | 到账率 | 预期佣金 | 覆盖情况 |
|----------|----------|----------|--------|----------|----------|
| 1        | 2100000  | 5        | 50     | 0        | if1 true, if2 true  |
| 2        | 2100000  | 5        | 70     | 2100000/7| if1 true, if2 false |
| 3        | 2100000  | 15       | 70     | 2100000/6| if1 false, if3 true |
| 4        | 2100000  | 15       | 90     | 2100000/5| if1 false, if3 false|

#### 条件组合覆盖
| 用例编号 | 年销售额 | 请假天数 | 到账率 | 预期佣金 | 组合情况 |
|----------|----------|----------|--------|----------|----------|
| 1        | 2100000  | 5        | 70     | 2100000/7| T T T |
| 2        | 2100000  | 5        | 50     | 0        | T T F |
| 3        | 2100000  | 15       | 70     | 2100000/6| T F T |
| 4        | 2100000  | 15       | 50     | 2100000/6| T F F |
| 5        | 1900000  | 5        | 90     | 1900000/5| F T T |
| 6        | 1900000  | 5        | 80     | 1900000/6| F T F |
| 7        | 1900000  | 15       | 90     | 1900000/5| F F T |
| 8        | 1900000  | 15       | 80     | 1900000/6| F F F |